<!-- 
  Copyright (c) 2018 Eclipse Foundation, Inc.

  This program and the accompanying materials are made available under the
  terms of the Eclipse Public License v. 2.0 which is available at
  http://www.eclipse.org/legal/epl-2.0.

  Contributors:
    Christopher Guindon <chris.guindon@eclipse-foundation.org>

  SPDX-License-Identifier: EPL-2.0
-->

{{ if isset .Site.Menus "sidebar" }}
<div class="container mobile-sidebar-container">
<div class="row">
<div class="col-md-8">
  <div id="mobile-sidebar">
    <div class="row sidebar-item related-content">
      <a href="#sidebars-contents" data-toggle="collapse" aria-expanded="false" aria-controls="sidebars-contents">
        <div class="col-xs-6"><i data-feather="plus"></i></div>
        <div class="col-xs-18 sidebar-text">Related Content</div>
      </a>
    </div>
  {{ $currentPage := . }}
  {{ .Scratch.Set "currentSection" "home" }}
  {{ if $currentPage.Section }}
    {{ .Scratch.Set "currentSection" $currentPage.Section }}
  {{ end }}
  {{$currentSection := .Scratch.Get "currentSection" }}
  {{ range .Site.Menus.sidebar }}
    {{$parentItem := . }}  <!-- 3 Parent Sidebars: News, Members, Community -->
      {{ if and (.HasChildren) (eq $currentSection $parentItem.Identifier) }}  <!-- community -->
        <div class="container collapse" id="sidebars-contents">
        {{ range .Children }}  <!-- Resources -->
          {{ if .HasChildren }} <!-- If Resources has Children -->
          <div class="row sidebar-sub-items">
            {{ range .Children }}  <!--Resources's children-->
              <div class="row sidebar-sub-item{{ if eq $currentPage.Title .Name }} active{{ end }}">
                <a href="{{ .URL }}" {{ if eq $currentPage.Title .Name }}class="active"{{ end }}>
                  <div class="col-xs-6"></div>
                  <div class="col-xs-18 sidebar-text">{{ .Name }}</div>
                </a>
              </div>
            {{ end }} <!--Resources's Children end-->
          </div>
          {{ else if or (eq $currentSection $parentItem.Identifier) (eq .Parent $currentSection) }} <!-- else If -->
            <div class="row sidebar-item{{ if eq $currentPage.Title .Name }} active{{ end }}">
              <a href="{{ .URL }}" {{ if eq $currentPage.Title .Name }}class="active"{{ end }}>
                <div class="col-xs-6">{{ .Pre }}</div>
                <div class="col-xs-18 sidebar-text">{{ .Name }}</div>
              </a>
            </div>
          {{ end }}  <!-- If Children.HasChildren and elseIf end -->
        {{ end }}  <!-- range Children end -->
        </div>
      {{ end }}  <!-- if and (.HasChildren) (eq $currentSection $parentItem.Identifier) end -->
  {{ end }}  <!-- range .Site.Menus.sidebar end -->
  </div> <!-- "main-sidebar" end -->
</div>
</div>
</div>
{{ end }}